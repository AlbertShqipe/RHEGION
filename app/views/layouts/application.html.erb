<!DOCTYPE html>
<html>
  <head>
    <title>Rhegion</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Favicon -->
    <%= favicon_link_tag 'Rhegion1.png', type: 'image/png' %>

    <!-- Google Icons-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <style>
      /* html{
        position: relative;
        height: 100%;
      } */

    </style>
    <script>
      function initMap() {
        let rhegion = {lat: 41.86386715336272, lng: 12.46471425396899};
        let map = new google.maps.Map(
          document.getElementById('map'), {
          zoom: 18,
          center: rhegion
        });
        let marker = new google.maps.Marker({
          position: rhegion,
          map: map
        });
      }
    </script>
  </head>

  <body>
    <div style="position:relative;">
      <%= render partial: 'pages/shared/navbar' %>
      <div>
        <%= yield %>
      </div>
      <% if controller_name == 'pages' && action_name == 'home' || controller_name == 'pages' && action_name == 'menu' %>
        <!-- Code specific to the home page -->
        <%! render partial: 'pages/shared/footer' %>
      <% else %>
        <%= render partial: 'pages/shared/footer'  %>
      <% end %>
    </div>


    <%# script to load google map %>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=<%=ENV['GOOGLE_MAPS_API_KEY']%>&callback=initMap" ></script>

    <%# script to have the loader at first %>
    <%# <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Delay hiding loading overlay and showing content for 4 seconds
        setTimeout(function() {
          document.getElementById('loading-overlay').style.display = 'none';
          document.getElementById('content').style.display = 'block';
        }, 2000); // Delay for 4 seconds (4000 milliseconds)
      });
    </script> %>

    <%# script for the slideshow %>
    <script>
      function openNav() {
        var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        if (screenWidth < 768) {
          document.getElementById("mySidenav").style.width = "80%";
          document.getElementById("main").style.marginLeft = "80%";
        } else if (screenWidth < 576){
          document.getElementById("mySidenav").style.width = "80%";
          document.getElementById("main").style.marginLeft = "80%";
        } else {
        document.getElementById("mySidenav").style.width = "40%";
        document.getElementById("main").style.marginLeft = "40%";
        }
      }

      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft= "0";
      }
    </script>

    <script>
      if (window.location.pathname == "/") {
        let home = document.getElementById("home");
        home.style["border-bottom"] = "1.5px solid rgb(246, 202, 46)";
        home.style["color"] = "white";
      } else if (window.location.pathname == "/contacts") {
        let contacts = document.getElementById("contacts");
            contacts.style["border-bottom"] = "1.5px solid rgb(246, 202, 46)";
            contacts.style["color"] = "white";
      } else {
        let about = document.getElementById("about");
        about.style["border-bottom"] = "1.5px solid rgb(246, 202, 46)";
        about.style["color"] = "white";
      }
    </script>

  </body>
</html>
